if("undefined"==typeof magento)var magento={};magento.glossary={terms:[],init:function(dataUrl,callback){$.get(dataUrl,function(data){glossary=magento.glossary,glossaryData=$($.parseXML(data)),glossaryData.find("term").each(glossary.processTerm),callback()},"text")},processTerm:function(){var term=$(this),glossary=magento.glossary;glossary.terms.push(glossary.unserializeTerm(term))},unserializeTerm:function(termXmlData){var data={};return data.id=termXmlData.find("uuid").text(),data.title=termXmlData.find("title").text(),data.wordTypes=termXmlData.find("word-types").text().trim().split(/\s+/).join(", "),data.longDefinition=termXmlData.find("long-definition").text(),data.shortDefinition=termXmlData.find("short-definition").text(),data.userTagsArray=termXmlData.find("user-tags").text().trim().split(/\s+/).map(function(element){return element.toLowerCase()}),data.contentTagsArray=termXmlData.find("content-tags").text().trim().replace(/(\w)\s(\w)/,"$1-$2").split(/\s\s+/).map(function(element){return element.toLowerCase()}),data.primarySource=termXmlData.find("primary-source").text().toLowerCase(),data}},magento.glossary.page={init:function(){magento.glossary.page.filter.init(),magento.glossary.page.insertGroupLinks()},insertTerms:function(terms){function metadataToggle(eventObject){magento.glossary.page.toggleDisplay(eventObject.target,"Show Metadata","Hide Metadata",".metadata")}function definitionToggle(eventObject){magento.glossary.page.toggleDisplay(eventObject.target,"More","Less",".long-definition")}"undefined"==typeof terms&&(terms=magento.glossary.terms);for(var i=0;i<terms.length;i++){var group=terms[i].title.toUpperCase().charAt(0),termTemplate=$("#termTemplate").html(),termGroupTemplate=$("#termGroupTemplate").html();0==$("#"+group+"-container").length&&$(Mustache.render(termGroupTemplate,{group:group})).appendTo("#glossary-terms"),$(Mustache.render(termTemplate,terms[i])).insertBefore("#"+group+"-container a")}magento.glossary.page.filter.applyUrlFilter(),$(".term-data .toggle-metadata").click(metadataToggle),$(".term-data .show-definition").click(definitionToggle)},toggleDisplay:function(toggleSwitch,textShow,textHide,selector){var target=$(selector,$(toggleSwitch).parentsUntil(".term",".term-data"));target.hasClass("hidden")?(target.addClass("show").removeClass("hidden"),$(toggleSwitch).text(textHide)):(target.addClass("hidden").removeClass("show"),$(toggleSwitch).text(textShow))},insertGroupLinks:function(){var renderer=magento.glossary.page.renderer;renderer.render("./js/templates/termGroupLink.mst",{groups:[{targetAnchor:"A",buttonText:"A-C",id:"a-c"},{targetAnchor:"D",buttonText:"D-F",id:"d-f"},{targetAnchor:"G",buttonText:"G-I",id:"g-i"},{targetAnchor:"J",buttonText:"J-L",id:"j-l"},{targetAnchor:"M",buttonText:"M-O",id:"m-o"},{targetAnchor:"P",buttonText:"P-R",id:"p-r"},{targetAnchor:"S",buttonText:"S-U",id:"s-u"},{targetAnchor:"V",buttonText:"V-Z",id:"v-z"},{targetAnchor:"",buttonText:"Back to Top",id:"top"}]},function(html){$("#term-groups").append(html)})}},magento.glossary.page.filter={init:function(){var filter=magento.glossary.page.filter;filter.appendTagFilter("Audience","checkbox","user-tag",null,[{id:"developer",text:"Developer"},{id:"merchant",text:"Merchant"},{id:"internal",text:"Internal"}],$("#user-tags")),filter.appendTagFilter("Content Type","radio","content-tag","content-type",[{id:null,text:"All"},{id:"business-marketing",text:"Business/Marketing"},{id:"design",text:"Design"},{id:"magento-software",text:"Magento Software"},{id:"pricing",text:"Pricing"},{id:"product",text:"Product"},{id:"programming",text:"Programming"}],$("#content-tags")),filter.appendTagFilter("Primary Source","radio","source","primary-source",[{id:null,text:"All"},{id:"design",text:"Design"},{id:"devdocs",text:"DevDocs"},{id:"marketing",text:"Marketing"},{id:"training",text:"Training"}],$("#primary-source"))},appendTagFilter:function(label,inputType,prefix,name,options,target){var renderer=($("#tagFilterTemplate").html(),magento.glossary.page.renderer);renderer.render("./js/templates/tagFilterTemplate.mst",{label:label,inputType:inputType,prefix:prefix,name:name,options:options},function(html){target.append(html),$(".filter input").click(magento.glossary.page.filter.updateFilter)})},getUrlParams:function(url){var queryString=url?url.split("?")[1]:window.location.search.slice(1),params={};if(queryString)for(var paramStrings=queryString.split("&"),i=0;i<paramStrings.length;i++){var paramKeyValue=paramStrings[i].split("=");params[paramKeyValue[0]]?params[paramKeyValue[0]].push(paramKeyValue[1].toLowerCase()):params[paramKeyValue[0]]=[paramKeyValue[1].toLowerCase()]}return params},applyFilters:function(classList){void 0==typeof classList&&(classList=magento.glossary.page.filter.filterClassList),$(".term").removeClass("show").addClass("hidden");var filter=classList.map(function(element){return element?"."+element:""}).join("");$(".term"+filter).removeClass("hidden").addClass("show")},updateFilter:function(){filterClassList=[],$(".filter input:checked").each(function(){filterClassList.push($(this).val())}),magento.glossary.page.filter.applyFilters(filterClassList)},applyUrlFilter:function(){var filter=magento.glossary.page.filter;urlParams=filter.getUrlParams();var filterSelector=[];if(urlParams.source&&filterSelector.push("source-"+urlParams.source[0]),urlParams.audience)for(var i=0;i<urlParams.audience.length;i++)filterSelector.push("user-tag-"+urlParams.audience[i]);urlParams.content&&filterSelector.push("content-tag-"+urlParams.content[0]),filter.applyFilters(filterSelector)}},magento.glossary.page.renderer={cache:{},init:function(){},render:function(templateName,params,callback){var renderer=magento.glossary.page.renderer;renderer.cache[templateName]?callback(Mustache.render(renderer.cache[templateName],params)):$.get(templateName,function(template){renderer.cache[templateName]=template,callback(Mustache.render(template,params))})}};